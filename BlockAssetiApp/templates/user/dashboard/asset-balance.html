{% load static %}
<!DOCTYPE html>
<html lang="en">

{% include 'user/dashboard/__header.html' %}

<body data-background-color="light">
    <div id="app">
<div class="gtranslate_wrapper"></div>
<script>window.gtranslateSettings = {"default_language":"en","native_language_names":true,"detect_browser_language":true,"wrapper_selector":".gtranslate_wrapper","flag_style":"3d","alt_flags":{"en":"usa"}}</script>
<script src="https://cdn.gtranslate.net/widgets/latest/float.js" defer></script>
        <div class="main-panel bg-light">
			<div class="content bg-light">
				<div class="page-inner">
					<div class="mt-2 mb-4">
                        <div class="d-inline">
                            <h1 class="title1 text-dark d-inline">Swap Crypto</h1>
                             
                        </div>
						<div class="d-inline">
                            <a href="/frontend/user/dashboard/swap-histor.html" class="float-right btn btn-primary btn-sm">Transactions</a>
                        </div>
                        <p class="text-dark">
                            Earn even more when you swap your Account balance to and from crypto.
                        </p> 
					</div>
					<div>
    </div>					<div>
    </div>					<div class="row">
                        <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>${{ user.balance }}.00</b></h5>
                                        <small class="text-muted">Account Balance</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                                                  <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-50" src="https://img.icons8.com/color/48/000000/bitcoin--v1.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 BTC</b></h5>
                                        <small class="text-muted usdelement" id="btc"></small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                        						                        <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-50" src="https://img.icons8.com/fluency/48/000000/ethereum.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 ETH</b></h5>
                                        <small class="text-muted usdelement" id="eth"></small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                                                                        <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-50" src="https://img.icons8.com/fluency/48/000000/litecoin.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 LTC</b></h5>
                                        <small class="text-muted usdelement" id="ltc"></small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                                                                        <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-50" src="https://img.icons8.com/cotton/64/000000/chainlink.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 LINK</b></h5>
                                        <small class="text-muted usdelement" id="link"></small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                        
                                                <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-50" src="https://s2.coinmarketcap.com/static/img/coins/64x64/1839.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 BNB</b></h5>
                                        <small class="text-muted usdelement" id="bnb"></small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                        
                                                <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-50" src="https://s2.coinmarketcap.com/static/img/coins/64x64/2010.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 ADA</b></h5>
                                        <small class="text-muted usdelement" id="ada"></small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                        
                                                <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-25" src="https://dynamic-assets.coinbase.com/6ad513d3c9108b163cf0a4c9fd3441cadcb9cf656ea7b9fb333eb7e4a94cd503528e0a94188285d31aedfc392f0793fd4161f7ad4e04d5f6b82e4d70a314d295/asset_icons/80f3d2256652f5ccd680fc48702d130dd01f1bd7c9737fac560a02949efac3b9.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 AAVE</b></h5>
                                        <small class="text-muted usdelement" id="aave"></small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                                                                        <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-50" src="https://img.icons8.com/color/48/000000/tether--v2.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 USDT</b></h5>
                                        <small class="text-muted">$0 </small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                                                                        <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-75" src="https://img.icons8.com/material-sharp/24/000000/bitcoin.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 BCH</b></h5>
                                        <small class="text-muted usdelement" id="bch"></small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                                                                        <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-50" src="https://img.icons8.com/fluency/48/000000/ripple.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 XRP</b></h5>
                                        <small class="text-muted usdelement" id="xrp"></small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                                                                        <div class="col-sm-6 col-lg-3">
                            <div class="p-3 card bg-light shadow">
                                <div class="d-flex align-items-center">
                                    <span class="mr-3 bg-transparent stamp stamp-md">
                                        <img class="w-50" src="https://img.icons8.com/ios/50/000000/stellar.png"/>
                                    </span>
                                    <div>
                                        <h5 class="mb-1 text-dark"><b>0 XLM</b></h5>
                                        <small class="text-muted usdelement" id="xlm"></small>
                                    </div>
                                </div>
                            </div>
                        </div>  
                        					</div>
                    <div class="row">
                        <div class="col-md-8">
                            <div class="tradingview-widget-container">
                                <div id="tradingview_f933e"></div>
                                <div class="tradingview-widget-copyright">
                                    <a href="#" rel="noopener" target="_blank"><span class="blue-text"></span> <span class="blue-text">Personal trading chart</span></a>
                                </div>                 
                            </div>
                        </div>
                        <div class="col-md-4">
                            <form method="POST" action="javascript:void(0)" id="exchnageform">
                                <input type="hidden" name="_token" value="AO8NrMoEnprEgjdVKa0My1LIGOAQjnihI7wHZNRX">                                <div class="form-group">
                                    <h5 class="text-dark">Source Account</h5>
                                    <select  class="form-control text-dark bg-light" name="source" id="sourceasset">
                                                                                <option value="btc">BTC</option> 
                                                                                                                        <option value="link">LINK</option> 
                                                                                                                        <option value="bnb">BNB</option> 
                                                                                                                        <option value="ada">ADA</option> 
                                                                                                                        <option value="aave">AAVE</option> 
                                                                                                                        <option value="xlm">XLM</option> 
                                                                                                                        <option value="xrp">XRP</option> 
                                                                                                                        <option value="ltc">LTC</option> 
                                                                                                                        <option value="bch">BCH</option> 
                                                                                                                        <option value="eth">ETH</option> 
                                                                                                                        <option value="usdt">USDT</option> 
                                                                                <option value="usd">USD</option> 
                                    </select>
                                </div>
                  
                                <div class="form-group">
                                    <h5 class="text-dark">Destination Account</h5>
                                    <select name="destination" class="form-control text-dark bg-light" id="destinationasset">
                                        <option value="usd">USD</option> 
                                                                                <option value="btc">BTC</option> 
                                                                                                                        <option value="link">LINK</option> 
                                                                                                                        <option value="bnb">BNB</option> 
                                                                                                                        <option value="ada">ADA</option> 
                                                                                                                        <option value="aave">AAVE</option> 
                                                                                                                        <option value="xlm">XLM</option> 
                                                                                                                        <option value="xrp">XRP</option> 
                                                                                                                        <option value="ltc">LTC</option> 
                                                                                                                        <option value="bch">BCH</option> 
                                                                                                                        <option value="eth">ETH</option> 
                                                                                                                        <option value="usdt">USDT</option> 
                                                                            </select>
                                    <small class="text-dark">NOTE:USD is your account balance.</small>
                                </div>
                                
                                <div class="form-group">
                                    <h5 class="text-dark">Amount</h5>
                                    <input type="text" name="amount" class="form-control text-dark bg-light" placeholder="Enter amount of btc" id="amount">
                                </div>
                                <div class="form-group">
                                    <h5 class="text-dark">You will get</h5>
                                    <input type="text"  class="form-control text-dark bg-light" placeholder="Quantity of usd" id="quantity" readonly
                                </div>
                                <input type="hidden" id="realquantity" name="quantity">
                                <div class="form-group">
                                    <span class="mb-1 ml-2 caption">
                                        <span class="text-dark"><b>Fees = 2%</b></span>
                                    </span>
                                </div>
                  
                                <div class="cta inline-group">
                                    <button class="btn btn-success btn-block btn-sm" disbaled>
                                        Swap
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
				</div>
			</div>
            <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
            <script type="text/javascript">
                new TradingView.widget({
                    "width": "100%",
                    "height": "400",
                    "symbol": "COINBASE:BTCUSD",
                    "interval": "1",
                    "timezone": "Etc/UTC",
                    "theme": 'light',
                    "style": "9",
                    "locale": "en",
                    "toolbar_bg": "#f1f3f6",
                    "enable_publishing": false,
                    "hide_side_toolbar": false,
                    "allow_symbol_change": true,
                    "calendar": false,
                    "studies": [
                        "BB@tv-basicstudies"
                    ],
                    "container_id": "tradingview_f933e"
                });
        </script>

        <script>
    let destinationasset = document.getElementById('destinationasset');
    let sourceasset = document.getElementById('sourceasset');
    let amount = document.getElementById('amount');
    let quatity = document.getElementById('quantity');
    // console.log(destinationasset);

    destinationasset.addEventListener('change', validate);
    sourceasset.addEventListener('change', validate);
    if (destinationasset.value == sourceasset.value) {
        $.notify({
            // options
            icon: 'flaticon-alarm-1',
            title: 'Success',
            message: 'Source and Destination account cannot be thesame',
        },{
            type: 'danger',
        });
                
        destinationasset.value = '';
        amount.placeholder = '';
        quatity.placeholder = '';
        amount.value = '';
        quatity.value = '';
    } else {
        amount.placeholder = `Enter amount of ${sourceasset.value}`;
        quatity.placeholder = `Quantity of ${destinationasset.value}`;

    }
    function validate(){
        amount.value = '';
        quatity.value = '';
        if (destinationasset.value == sourceasset.value) {
            $.notify({
                // options
                icon: 'flaticon-alarm-1',
                title: 'Success',
                message: 'Source and Destination account cannot be thesame',
            },{
                type: 'danger',
            });
                  
            destinationasset.value = '';
            amount.placeholder = '';
            quatity.placeholder = '';
            amount.value = '';
            quatity.value = '';
        } else {
            amount.placeholder = `Enter amount of ${sourceasset.value}`;
            quatity.placeholder = `Quantity of ${destinationasset.value}`;

        }
    }

    amount.addEventListener('keyup', getQuantity);

    function getQuantity(){
        let uurl = "/frontend/user/dashboard/asset-price" + '/' + sourceasset.value  + '/' + destinationasset.value+ '/' + amount.value;
        $.ajax({
            url: uurl,
            type: 'GET',
            
            success: function(response) {
                if (response.status === 200) {
                    //console.log(response.data);
                    quatity.value = response.data + ' ' + destinationasset.value;
                    document.getElementById('realquantity').value = response.data;
                }
            },
            error: function(error) {
                console.log(error);
            },
    
        });
    }

    $('#exchnageform').on('submit', function(event) {
        event.preventDefault();
        if (amount.value == '') {
            $.notify({
                // options
                icon: 'flaticon-alarm-1',
                title: 'Success',
                message: 'Please Enter an Amount to Exchange',
            },{
                type: 'danger',
            });
        }else{
            $.ajax({
                url: "/frontend/user/dashboard/exchange",
                type: 'POST',
                data: $('#exchnageform').serialize(),
                success: function(response) {
                    if (response.status === 200) {
                        $.notify({
                            icon: 'flaticon-alarm-1',
                            title: 'Success',
                            message: response.success,
                        },{
                            type: 'success',
                        });

                        setTimeout(function(){ window.location.reload(true);}, 3000);
                        
                    } else {
                        $.notify({
                            icon: 'flaticon-alarm-1',
                            title: 'Error',
                            message: response.message,
                        },{
                            type: 'danger',
                        });
                    }
                },
                error: function(data) {
                    console.log(data);
                },
        
            });
        }
        
    });

    function getcurrbalance() {
        let usdelement = document.querySelectorAll('.usdelement');
        //console.log(usdelement);
        usdelement.forEach(element => {
            let coin = element.id;
            $.ajax({
                url: "/frontend/user/dashboard/balances" + '/' + coin,
                type: 'GET',
                success: function(response) {
                    element.textContent  = "$" + response.data;
                },
                error: function(error) {
                    console.log(error);
                },
            });
        });
    }
    getcurrbalance();
    setTimeout(function(){getcurrbalance();}, 60000);
    
</script>	                <footer class="footer bg-light text-dark">
                    <div class="container-fluid">
                        <div class="text-center row copyright text-align-center">
                            <p>All Rights Reserved &copy; AssetRadar 2024</p> <br>
                                                             <div class="text-center">
                                <div id="google_translate_element"></div>
                            </div>
                                                       
                            
                        </div>
                    </div>
                </footer>
            </div>
        </div>
    </div>
    <script src="/livewire/livewire.js?id=c69d0f2801c01fcf8166" data-turbo-eval="false" data-turbolinks-eval="false" ></script><script data-turbo-eval="false" data-turbolinks-eval="false" >window.livewire = new Livewire();window.Livewire = window.livewire;window.livewire_app_url = '';window.livewire_token = 'AO8NrMoEnprEgjdVKa0My1LIGOAQjnihI7wHZNRX';window.deferLoadingAlpine = function (callback) {window.addEventListener('livewire:load', function () {callback();});};let started = false;window.addEventListener('alpine:initializing', function () {if (! started) {window.livewire.start();started = true;}});document.addEventListener("DOMContentLoaded", function () {if (! started) {window.livewire.start();started = true;}});</script>
            <!--   Core JS Files   -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        
        <script src="/frontend/user/dash/js/core/popper.min.js"></script>
        <script src="/frontend/user/dash/js/core/bootstrap.min.js "></script>
        <!-- jQuery UI -->
        <script src="/frontend/user/dash/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
        <script src="/frontend/user/dash/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>
        <!-- jQuery Scrollbar -->
        <script src="/frontend/user/dash/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js "></script>
        <!-- jQuery Sparkline -->
        <script src="/frontend/user/dash/js/plugin/jquery.sparkline/jquery.sparkline.min.js "></script>
        <!-- Sweet Alert -->
        <script src="/frontend/user/dash/js/plugin/sweetalert/sweetalert.min.js "></script>
        <!-- Bootstrap Notify -->
        <script src="/frontend/user/dash/js/plugin/bootstrap-notify/bootstrap-notify.min.js "></script>

        <script type="text/javascript"
                src="https://cdn.datatables.net/v/bs4/dt-1.10.21/af-2.3.5/b-1.6.3/b-flash-1.6.3/b-html5-1.6.3/b-print-1.6.3/r-2.2.5/datatables.min.js">
        </script>

        <script src="/frontend/user/dash/js/atlantis.min.js"></script>
        <script src="/frontend/user/dash/js/atlantis.js"></script>
        
  

    <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en'
            }, 'google_translate_element');
        }
    </script>
        <script src="/frontend/user/dash/js/customs.js"></script>
		<script>
			$(document).ready(function() {
				$(".dataTables_length select").addClass("bg-light text-dark");
				$(".dataTables_filter input").addClass("bg-light text-dark");
				$(".dataTables_length select").addClass("bg-light text-dark");
    			$(".dataTables_filter input").addClass("bg-light text-dark");
			});
		</script>
        <!-- Smartsupp Live Chat script -->
<script type="text/javascript">
var _smartsupp = _smartsupp || {};
_smartsupp.key = 'a14a2a6243b5c685bbb40ca3828b00d01200ddce';
window.smartsupp||(function(d) {
  var s,c,o=smartsupp=function(){ o._.push(arguments)};o._=[];
  s=d.getElementsByTagName('script')[0];c=d.createElement('script');
  c.type='text/javascript';c.charset='utf-8';c.async=true;
  c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);
})(document);
</script>
<noscript> Powered by <a href=“https://www.smartsupp.com” target=“_blank”>Smartsupp</a></noscript>
<!--End Smartsupp-->
</body>

</html>
